generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("NEXT_PUBLIC_PGADMIN_DB_URL")
}

model access_levels {
  id           BigInt    @id @default(autoincrement())
  accesslevels String    @db.VarChar(256)
  usersid      BigInt
  created_at   DateTime? @default(now()) @db.Timestamp(6)
  updated_at   DateTime? @default(now()) @db.Timestamp(6)
  users        users     @relation(fields: [usersid], references: [id], onDelete: Cascade)
}

model chemical_association {
  id         BigInt     @id @default(autoincrement())
  created_at DateTime   @default(now()) @db.Timestamp(6)
  stepid     BigInt?
  chemicalid BigInt?
  percentage Float?
  dosage     Float?
  chemicals   chemicals? @relation(fields: [chemicalid], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_chemical")
  steps      steps?     @relation(fields: [stepid], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_step")
}

model chemicals {
  id                   BigInt                 @id @default(autoincrement())
  created_at           DateTime               @default(now()) @db.Timestamp(6)
  name                 String?                @unique(map: "unique_chemical_name") @db.VarChar(256)
  kg_per_can           BigInt?
  cost_uom             String?                @db.VarChar(50)
  type_and_use         String?                @db.VarChar(256)
  cost_per_unit        Decimal?               @db.Decimal(10, 2)
  unit_used            String?                @db.VarChar(256)
  unit_conversion      Decimal?               @db.Decimal(10, 2)
  cost_per_kg          Decimal?               @db.Decimal(10, 2)
  full_name            String?                @db.VarChar(256)
  chemical_association chemical_association[]
}

model history {
  id         BigInt   @id @default(autoincrement())
  title      String?  @db.VarChar(256)
  created_at DateTime @default(now()) @db.Timestamp(6)
  user       BigInt?
  users      users?   @relation(fields: [user], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_history_user")
}

model recipes {
  id           BigInt   @id(map: "recipe_pkey") @default(autoincrement())
  created_at   DateTime @default(now()) @db.Timestamp(6)
  load_size    BigInt?
  machine_type String?  @db.VarChar(256)
  finish       String?  @db.VarChar(256)
  fabric       String?  @db.VarChar(256)
  recipe       BigInt?  @unique(map: "unique_recipe_name")
  fno          String?  @db.VarChar(256)
  name         String?  @db.VarChar(256)
  steps        steps[]
}

model steps {
  id                   BigInt                 @id @default(autoincrement())
  created_at           DateTime               @default(now()) @db.Timestamp(6)
  action               String?                @db.VarChar(256)
  liters               BigInt?
  rpm                  BigInt?
  centigrade           BigInt?
  ph                   String?                @db.VarChar(256)
  lr                   String?                @db.VarChar(256)
  tds                  String?                @db.VarChar(256)
  tss                  String?                @db.VarChar(256)
  recipesid            BigInt?
  step_no              String?                @db.VarChar(256)
  minutes              String?                @db.VarChar(256)
  step_id              BigInt
  chemical_association chemical_association[]
  recipes              recipes?               @relation(fields: [recipesid], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_stept_table")
}

model users {
  id            BigInt          @id @default(autoincrement())
  created_at    DateTime        @default(now()) @db.Timestamp(6)
  username      String          @unique(map: "unique_username") @db.VarChar(256)
  password      String          @db.VarChar(256)
  name          String          @db.VarChar(256)
  department    String?         @db.VarChar(256)
  designation   String?         @db.VarChar(256)
  cnic          String?         @db.VarChar(256)
  code          String          @db.VarChar(256)
  manager       String?         @db.VarChar(256)
  bank          String?         @db.VarChar(256)
  phone         String?         @db.VarChar(256)
  account       String?         @db.VarChar(256)
  createdby     String?         @db.VarChar(256)
  updatedby     String?         @db.VarChar(256)
  access_levels access_levels[]
  history       history[]
}
